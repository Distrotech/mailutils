2001-04-14  Alain Magloire

	* mailbox/folder_imap.c: When calling imap_writeline () the
	cookie for the tag should be unsigned %d --> %u.
	(imap_send) : The number of bytes in memmove was wrong.
	* mailbox/mbx_imap.c: Some duplicate degug calls MAILBOX_DEBUG0()
	removed.
	(attribute_string): IMAP does not have a \\Read flag it should be
	the same as \\Seen so attribute_read() == attribute_seen().
	(flag_string): New function.
	(imap_attr_set_flags): Use flag_string(), instead.
	* mailbox/include/imap0.h:  CLEAR_STATE() should also deselect
	the current mailbox.

	* mailbox/mbx_pop.c (pop_write): The number of bytes in the memmove
	was wrong.

	* imap4d/imap4d.h: Add HAVE_SECURITY_PAM_APPL_H.
	* imap4d/login.c: PAM_ERROR wrongly define.
	* imap4d/expunge.c: Initialise variable sp.
	* imap4d/logout.c: Initialise variable sp.
	* imap4d/noop.c: Initialise variable sp.

	* mailbox/attachement.c (message_create_attachment): Use base_name().
	* mailbox/mbx_mbox.c (mbox_tmpfile): Use base_name().
	* configure.in: AC_REP_FUNC(vasprintf strcasecmp strncasecmp).
	* include/mailutils/Makefile.am: Add property.h, parse822.h.
	* lib/vasprintf.c: Taken from libit.
	* lib/basename.c: Taken from libit/fileutils.
	* lib/Makefile.am.c: Always use our basename(base_name).
	(AM_INIT_AUTOMAKE): Change version to 0.0.9

2001-04-13  Sam Roberts

	QNX needed to include <strings.h> for many of the useful string
	functions also to define _QNX_SOURCE so <sys/time.h> doesn't have
	an internal warning.

	* configure.in: Check for libgen.h.
	* imap4d/imap4d.h: Define __QNX_SOURCE.
	* mailbox/mime.c: wasn't including config.h
	* mailbox/attachment.c: QNX needed libgen.h for basename(),
	include <strings.h> if define.
	* mailbox/filter.c: Include <strings.h>.
	* mailbox/mbx_mbox.c: Include <strings.h>.
	* mailbox/folder_imap.c: Include <strings.h>.
	* mailbox/header.c: Include <strings.h>.
	* mailbox/property.c: Include <strings.h>.
	* mailbox/registrar.c: Include <strings.h>.
	* mailbox/url.c: Include <strings.h>.
	* mailbox/url_pop.c: Include <strings.h>.
	* pop3d/user.c: QNX says getspnam(char* n), I cast away the error.

2001-04-13  Sam Roberts

	* mailbox/parse822.c, include/mailutils/parse822.h: now can
	  quote the local-part of and addr-spec, and a string.

2001-04-13  Sam Roberts

	* doc/address.texi: updated docs, now they match the parse822.
	* mailbox/parse822.c: small tweaks to the new parser, the changes
	  made during the tidying over the last month were:
	  - use C comments only.
	  - don't use C++ reserved words.
	  - fix is_digit() to be like the other is functions
	  - Changed return codes to:
	   . no mem (ENOMEM)
	   . function wasn't called correctly, usually a missing
	     argument (EINVAL)
	   . invalid syntax found during parsing (ENOENT)
	   . success == 0
	  - const-corrected the APIs
	  - removed unnecessary (in C) casts.
	  - mailbox_t* removed in favor of address_t.
	  - fix handful of memory leaks detected by Alain.

2001-04-10  Alain Magloire

	* pop3d/retr.c (pop3_retr): Typo.
	* pop3d/top.c (pop3_top): No need to reallocate when sending the
	headers.
	* doc/mailbox.texi: Put the functions in alphabetic orders.

2001-04-10  Alain Magloire

	* mailbox/Makefile.am: filter_trans.c added, trans_stream.c deleted.
	* mailbox/attachment.c (message_create_attachment): use
	filter_create().
	(message_save_attachment): use filter_create().
	* mailbox/body.c (body_set_lines): Wrong comparison for the owner.
	* mailbox/mbx_mbox.c: Do not count the line separtor of part
	of the mailbox.

	* mailbox/url.c (url_is_same_sheme): New function.
	(url_is_same_user): New function.
	(url_is_same_path): New function.
	(url_is_same_host): New function.
	(url_is_same_port): New function.
	* mailbox/folder.c : Moved the is_same_*() functions in url.c
	they can be generally usefull.
	(is_same_sheme): Removed.
	(is_same_user): Removed.
	(is_same_path): Removed.
	(is_same_host): Removed.
	(is_same_port): Removed.

	* mailbox/folder_imap.c (folder_imap_create): New function,
	CREATE a new mailbox.
	(folder_imap_open): Calls folder_imap_create when the MU_STREAM_CREAT
	flag is set.
	* mailbox/mbx_imap.c: Appending messages implemented, if the message
	comes from the same imap folder, it is COPY otherwise APPEND.
	(is_same_folder): New function.
	(imap_append_message): Implemented.
	(attribute_string): New functions.
	(imap_copy_message): New function.
	* mailbox/include/imap0.h: New enum, IMAP_APPEND, IMAP_APPEND_ACK,
	IMAP_APPEND_CONT, IMAP_APPEND_SEND, IMAP_COPY, IMAP_COPY_ACK,
	IMAP_CREATE, IMAP_CREATE_ACK.

2001-04-06  Alain Magloire

	* mailbox/parse822.c: New parser.
	* include/mailutils/parse822.h: New file.
	* mailbox/address.c (address_create): Remove the old parsing and use
	parse822 as the underlying engine.
	(address_parse): Removed.
	(gettoken): Removed.
	(quotes): Removed.
	(address_get_personal): Remove the code to unquote, parse822 takes
	care if it. Return value when no field is ENOENT.
	(address_get_comments): Return value when no field ENOENT.
	(address_get_local_part): Return value when no field ENOENT.
	(address_get_domain): Return value when no field ENOENT.
	(address_get_email): Return value when no field ENOENT.
	(address_get_route): Return value when no field ENOENT.
	* mailbox/message.c (message_sender): Use parse822 to retrieve
	the email from the From: field.
	(message_set_mailbox): New function.
	* mailbox/misc.c : Removed the old parsing code.
	(gettoken): Removed.
	(parseaddr): Removed.
	* mailbox/include/misc.h : Removed parseaddr() prototypes.
	From Sam Roberts, the new parse822 parser..

2001-04-04  Alain Magloire

	Introduction of the notion of filter_t object takes a stream and
	perform some filtering on it.  All the decoding streams will move
	to this i.e. quoted-printable, base64 etc .. This scheme will also
	permit users to add to the list new filters.  Still work in progress.

	* mailbox/Makefile.am : Add filter.c filter_rfc822.c.
	* mailbox/body.c : When creating a floating body i.e creating
	a temporary file, the stream was not "own" by the body_t.
	(_body_get_fd): Likewised.
	(_body_read):_ Likewised.
	(_body_readline): Likewised.
	(_body_write): Likewised.
	(_body_truncate): Likewised.
	(_body_size): Likewised.
	(_body_flush): Likewised.

	* mailbox/folder_imap.c (imap_literal_string): Check if the
	callback.buffer is NULL.
	(imap_body): Do no set the callback.type if "FIELDS" is part of the
	string.

	* mailbox/header.c: Remove the support for RFC822 it will be part
	of the filter_t object.
	* mailbox/mbx_mbox.c: Likewised.
	* mailbox/mailbox.c (mailbox_size): Rename to mailbox_get_size().

	* mailbox/stream.c (stream_is_seekable): New function.
	(stream_set_property): New function.
	(stream_get_property): New function.

	* mailbox/trans_stream.c: Beautify.

	* include/mailutils/filter.h: new file.

	* doc/mailbox.texi: Updated.
	More changes to come.

2001-03-20  Alain Magloire

	* mailbox/folder_imap.c (imap_readline) :  If the server goes away
	suddenly return an error.
	* mailbox/smtp.c (smtp_readline) :  If the server goes away
	suddenly return an error.
	* mailbox/mbx_pop.c (pop_readline) :  If the server goes away suddenly
	return an error.
	* mailbox/mbx_pop.c (pop_open) : The ticket comes from the folder.

2001-03-17  Vesselin Atanasov

	* configure.in: AC_REQUIRE is not .. required.  Just call
	jm_FUNC_MALLOC and jm_FUNC_REALLOC.

2001-03-17  Alain Magloire

	Clean the property object, mailbox and mailer have property object
	that you can examine.  Still a draft: the value of objects are ints.
	This feature was put in to help the imap4d server, in this protocol
	you can get a substring of the message starting from a certain offset.
	To make the coding of imap4d simpler the complexity was move to the
	library.  It is possible now by setting a property of the mailbox
	to make it output rfc822 stream i.e. "\r\n" terminated stream, the
	offset and the size are also in term of rfc822.

	* mailbox/property.c (property_set_int): Removed.
	* mailbox/property.c (property_set_long): Removed.
	* mailbox/property.c (property_set_double): Removed.
	* mailbox/property.c (property_set_set_value): Removed.
	* mailbox/property.c (property_set_get_value): Removed.
	* mailbox/property.c (property_add_propety): New function.
	* mailbox/property.c (hash): Renamed poperty_hash.
	* include/mailutils/property.h (struct property_list): New structure.

	* mailbox/include/mailbox0.h: new fields properties, properties_count.
	* mailbox/mailbox.c (mailbox_get_property): The function will create
	the proprety and add the default properties.
	(mailbox_destroy): The default poperties and property are freed.
	(mailbox_is_updated): Return ENOSYS if the argumets are wrong.
	(mailbox_scan): Return ENOSYS if the argumets are wrong.
	(mailbox_uidvalidity): Return ENOSYS if the argumets are wrong.
	(mailbox_uidnext): Return ENOSYS if the argumets are wrong.

	* mailbox/mbx_mbox.c (mbx_init): Set its default properties.
	(mbx_header_get_fvalue): Return the len, even if buffer is null.
	(mbx_body_read): If property rfc822 is set call
	mbx_body_readstream_rfc822 to the conversion.
	(mbx_body_readstream_rfc822): New function, do the conversion.
	(struct _mbox_message): Remove the stream field.
	added struct rfc822.
	(mbox_get_header_readstream): Removed.
	(mbox_header_size): Do the conversion if rfc822 set.
	(mbox_body_size): Do the conversion if rfc822 set.
	(mbox_get_message): Set the property on the header_t.

	* mailbox/mbx_pop.c (pop_init): Set its default properties.
	(pop_open): Remove MU_STREAM_POP flag obsolete.
	(pop_readline):  Do the converstion if rfc822 is set.

	* mailbox/mbx_imap.c (mbx_imap_init): Set its default properties.
	* mailbox/folder_imap.c (folder_imap_open): Remove MU_STREAM_IMAP,
	no longer pertinent.
	(imap_readline): If propety rfc822 is set don't strip '\r'.

	* mailbox/header.c (header_set_property): New functions.
	(header_get_property): New functions.
	(header_destroy): Destroy property object.
	(header_get_value): If property rfc822 is set
	convert all "\n" to "\r\n".
	(header_read): If property rfc822 is et convert to \n to \r\n.
	(header_readline): If property rfc822 is et convert to \n to \r\n.
	(fill_blurb): Clear the function overloading, when the blurb is fill.
	* mailbox/include/header0.h: New field property.
	* include/mailutils/header.h: Added prototypes for
	header_set_property and header_get_property.

	* include/mailutils/stream.h: Remove the identification macros;
	MU_STREAM_IMAP, MU_STREAM_FILE, MU_STREAM_POP, it is part of the
	properties of each object.

	* mailbox/mailer.c (mailer_destroy): Free the properties.
	* mailbox/mailer.c (mailer_get_poperty): New function, return the
	property of the mailbox.

	* mailbox/smtp.c (_mailer_smtp_init): Set its default properties.
	* mailbox/sendmail.c (_sendmail_init): Set its default properties.

	* mailbox/include/Makefile.am: Add property0.h.

2001-03-09  Sam Roberts

	* include/mailutils/address.h: api for new parser,
	address_create0(), and to get route, local-part, and domain.
	* mailbox/address.c: implementation of 3 new get functions, first
	cut, needs cleanup
	* mailbox/include/address0.h: new members of _address, deleted
	one that looked unused.
	* mailbox/parse822.c: implementation of address_create0(),
	which handles groups, routes, and the hoary old comment phrase
	* addr/addr.c - parses addresses from its command line or
	stding using create() or create0().
	* mailbox/mbx_imap.c: need strings.h on some systems, like Nto

2001-03-12  Sam Roberts

	* frm/frm.c (main): Changed to only print subject if
	header_get_value(SUBJECT) returned success, otherwise I assume
	it would print the stack.
	(usage): Corrected a tiny typo in usage message.
	(long_options): Added an option -f,--field that prints the named field
	in the mailbox, and nothing else.

2001-03-09  Alain Magloire

	* mailbox/Makefile.am: add property.c in the src list.
	* doc/mailutils.texi: add Sam to the list of acknowlegment.

2001-03-09  Sam Roberts

	* doc/address.texi: documented all the functions in address.h
	* doc/url.texi: corrected location or url.h header

2001-03-08  Sam Roberts

	* README-alpha:  Be clearer on how to configure.
	* doc/address.texi : New File, description of address_t object.
	* doc/mailutils.texi : add include address.texi.

2001-03-03  Alain Magloire

	* imap4d/fetch.c (fetch_operation) : HEADER.FIELDS.NOT implemented.
	fetch_opertaion() take a new argument.
	* imap4d/util.c (util_upper) : New function string upper.

	* mailbox/heder.c: Added new functionnalities to help the imap4d
	fetch command.
	(header_get_field_count) : New function returns the number of header
	fields in the header.
	(header_get_field_name): New function returns the field name.
	(header_get_field_value): New function returns the field value.

2001-03-03  Alain Magloire

	* include/mailutils/address.h: s/_cplusplus/__cplusplus/g
	(include/mailutils/auth.h): Likewised.
	(include/mailutils/body.h): Likewised.
	(include/mailutils/debug.h): Likewised.
	(include/mailutils/header.h): Likewised.
	(include/mailutils/iterator.h): Likewised.
	(include/mailutils/list.h): Likewised.
	(include/mailutils/mailer.h): Likewised.
	(include/mailutils/message.h): Likewised.
	(include/mailutils/mime.h): Likewised.
	(include/mailutils/observer.h): Likewised.
	(include/mailutils/property.h): Likewised.
	(include/mailutils/registrar.h): Likewised.
	(mailbox/include/address0.h): Likewised.
	(mailbox/include/auth0.h): Likewised.
	(mailbox/include/body0.h): Likewised.
	(mailbox/include/debug0.h): Likewised.
	(mailbox/include/header0.h): Likewised.
	(mailbox/include/iterator0.h): Likewised.
	(mailbox/include/list0.h): Likewised.
	(mailbox/include/mailer0.h): Likewised.
	(mailbox/include/message0.h): Likewised.
	(mailbox/include/mime0.h): Likewised.
	(mailbox/include/observer0.h): Likewised.
	Pointed by Sam Roberts.

2001-02-28  Alain Magloire

	* mailbox/address.c (address_get_personal): Remove surrounding quotes.
	* mailbox/mbx_mbox.c (mbox_scan): If the mailbox is updated don't
	rescan again.
	(mbox_expunge): Same the uidvalidity in the header field "IMABase:"
	on the first message of the mailbox.

	* imap4d/fetch.c (fetch_envelope): Envelope imap4 command implemented.
	(fetch_send_address): New function.

2001-02-26  Alain Magloire

	* mailbox/mbx_imap.c (imap_submessage_size): New function to
	retrieve message size of attachments.
	* imap4d/fetch.c: More functionnality for the FETCH command.
	(fetch_operation): New operation.
	* imap4d/util.c (util_token): little helper function.

2001-02-25  Alain Magloire

	* lib/strtok_r.c: If there are no delimiters left save the old string
	and return NULL.

	* mailbox/folder_imap.c (imap_fetch): Finish imap FETCH command.
	(imap_rfc822): New Function.
	(imap_rfc822_text): New Function.
	(imap_rfc822_size): New Function.
	(imap_rfc822_header): New Function.
	(imap_uid): New Function.
	(imap_body): New Function.
	(imap_bodystructure0): Save the size.

2001-02-22  Alain Magloire

	* mailbox/property.c: New file.
	* include/mailutils/property.h: New file.
	* mailbox/mailbox.c (mailbox_get_property): New function,
	a first draft to let set "property" on a mailbox that can
	change its behaviour.
	* mailbox/include/mailbox0.h: New field in struct _mailbox, property.

	* sieve/lex-sieve.lex: Add LGPL banner.
	* sieve/gram-sieve.y: Add LGPL banner.

2001-02-22  Alain Magloire

	* sieve: New Directory.
	* sieve/lex-sieve.lex: RFC3028 tokenizer.
	* sieve/gram-sieve.y: RFC3028 grammar.

2001-02-20  Alain Magloire

	* mailbox/mailbox.c (mailbox_set_ticket): Those objects are now part
	of the folder if a folder is attached to the mailbox.
	(mailbox_set_authority: Likewise.
	(mailbox_set_stream): Likewise.
	* mailbox/mbx_imap.c (imap_message_read): If offset == 0, reset
	the lines to 0.
	(imap_body_read): Likewise.

2001-02-19  Alain Magloire

	* mailbox/mbx_pop.c (pop_body_read): Move the CHECK_BUSY higher
	it should be the first thing done.  If the state is POP_NO_STATE
	reset the offset and the size to 0 i.e we are starting fresh.
	(pop_header_read): Likewise.
	(pop_message_read): Likewise.
	* mailbox/stream.c (stream_write): Don't call stream_flush().

2001-02-04  Alain Magloire

	* mailbox/message.c (message_get_uid): Add message_get_uid() for
	the UID of the message (IMAP definition) and message_get_uidl() for
	the POP3 definition.
	* mailbox/attachment.c: Indentation fixes.
	* mailbox/file_stream.c: Make sure that the FILE* is close before		opening.
	* mailbox/folder_imap.c: Use strcasecmp() not strcmp().
	* mailbox/mailbox.c: Added mailbox_uidnext() and mailbox_uidvalidity.
	* mailbox/mapfile_stream.c: When munmap() failed we should check
	against MAP_FAILED, not NULL.
	* mailbox/mbx_imap.c: Implement imap_uidnext(), imap_uidvalidity()
	imap_message_uid().
	* mailbox/mbx_mbox.c: Implement mbox_uidnext(), mbox_uidvalidity()
	mbox_message_uid().
	* mailbox/mbx_mboxscan.c: Implement uidvalidity, it is save int the
	header of the first message, "X-IMAPbase: 127673838 12", a la c-client.
	Save UID, it is save in "X-UID".
	* mailbox/mbx_pop.c: Implement pop_messages_recent(),
	pop_message_unseen() and pop_uid().
	* mailbox/trans_stream.c: Indentation fixes.

	* include/mailutils/message.h: New prototypes message_get_uid(),
	message_set_get_uid().
	* include/mailutils/mailbox.h: New prototypes mailbox_uidnext(),
	mailbox_uidvalidity().

	* lib/snprintf.c lib/snprintf.h: Put it under the LGPL term.

	* mailbox/imap4d/fetch.c: First draft implementation, very yucky.
	* mailbox/imap4d/select.c: First draft implementation.
	* mailbox/imap4d/util.c: Add util_msgset() and util_send().
	Reuse of util_getcommand() for subcommands.

	* mailbox/pop3d/uidl.c: API change the call is message_get_uidl()
	to have UIDL POP3.


2001-02-03  Alain Magloire

	* mailbox/mailbox.c mailbox/mbx_mbox.c mailbox/mbx_imap.c:
	Implement mailbox_messages_recent() and mailbox_message_unseen(), this
	time as define by the IMAP rfc.

2001-02-02  Alain Magloire

	* mailbox/header.c: ENOENT was not return if the header was
	not found.
	* mailbox/mbx_mbox.c: When expunging check to see if the registar
	the path_record too.

2001-02-02  Alain Magloire

	* pop3d/extra.c (pop3_readline): Since the length of the string
	is known, we can use memcpy() and friends for string manipulations.
	memXXX() functions are builtin in GNU C (gcc) and are much faster
	then the strXXX() counterparts. Small change in the loop to take
	advantage of this.

	* pop3d/quit.c: The rfc1939 insist that after a QUIT, we must
	release any resources and close the connection:
	"Whether the removal was successful or not, the server
        then releases any exclusive-access lock on the maildrop
        and closes the TCP connection."  This was not done if error
	occured while expunging, now we will close the connection and
	notify the client of the error(ERR_FILE).

2001-02-01  Alain Magloire

	"Premature Optimization Is The Root Of All Evil", Knuth.

	* mailbox/attachment.c: Typo should be "Content-Disposition"

	* mailbox/mbx_mbox.c mailbox/mbx_mboxscan.c mailbox/header.c:
	Attempt to optimze the header, header_get_fvalue() is created,
	The mailbox save/cache the most common headers, when doing a
	header_get_value(), header_get_fvalue() is call first hoping
	that the requested header was cache, if it fails we fall back
	to the usual parsing.  The common elected headers are : From,
	To, Cc, Subject, Date, Content-Type, X-UIDL, X-UID.

	* mailbox/mailbox.c mailbox/mbx_mbox.c mailbox/mbx_imap.c:
	I've confuse the semantic of "unseen" and "recent", "unseen"
	means new mail, not recent.  Renamed mailbox_recent_count()
	to mailbox_unseen_count().
	* include/mailutils/mailbox.h: updated for mailbox_unseen_count()


2001-01-25  Alain Magloire

	* frm/frm.c: Forget to add --summary option and fix return status.
	When being very quiet just freopen(/dev/null, w, stdout).

2001-01-25  Alain Magloire

	* pop3d/capa.c: Add UIDL in the capability list.
	and update Copyrigth.
	* pop3d/pop3d.c: Remove mbox_record register, only need path_record.
	* pop3d/retr.c: When retrieve a message should be mark as read.
	since we do not strip out the header "Status:".
	* pop3d/top.c: Adjust stream_readline().

2001-01-25  Alain Magloire

	While working on the new version of the API mailbox, Changelog was
	discontinued, since the API could literaly change overnight a
	maintenace of the entries were of a particular burden.
	The API of the library, and some utilities like pop3d are
	stable enough to restart normal entries.

	* mailbox/*: New Api to access mailbox.
	* include/mailutils: Public prototypes of the API.
	* frm/frm.c frm/Makefile.am: A clone of elm frm utility.
	* from/from.c from/Makefile.am: A utility to scan mailboxes.
	* pop3d/* : GNU pop3d server.

2000-05-19  Sean 'Shaleh' Perry <shaleh@debian.org>

	* libmailbox/mh.c: fleshed out mh_open() some more

2000-05-18  Sean 'Shaleh' Perry <shaleh@debian.org>

	* libmailbox/mh.c: fleshed out mh_open() some more

2000-05-15  Sean 'Shaleh' Perry <shaleh@debian.org>

	* libmailbox/*: ran some files thru emacs indent, I think I introduced
	some oddness with vi
	* libmailbox/mh.[ch]: new files, based on maildir
	the mh work is very empty -- just mh_open right now

2000-04-19  Jeff Bailey  <jbailey@nisa.net>

	* configure.in: Test for limits.h and inttypes.h, add malloc
	and realloc checks.
	* m4/: New directory
	* m4/Makefile.am: New file to support directory
	* m4/malloc.m4: File to support lib/ directory
	* m4/realloc.m4: File to support lib/ directory
	* lib/Makefile.am: Distribute xalloc.h
	* lib/xalloc.h: New file to support xmalloc.c
	* lib/xmalloc.c: New version from sh-utils-2.0g
	* autogen.sh: Look in m4 for extra macros
	* doc/Makefile.am: Rearrange to quiet automake

2000-03-28  Jakob 'sparky' Kaivo  <jkaivo@elijah.nodomainname.net>

	* pop3d/pop3d.c (main): handle SIGPIPE

2000-01-19  Sean 'Shaleh' Perry

	* mailbox/mbx_mh.c: some more code fleshing, still ugly
	* README README-alpha: updates, corrected README to list mailbox as LGPL

2000-01-19  Sean 'Shaleh' Perry

	* mailbox/mbx_mh.c: new file
	no header, no error checking, no hable englais
	* url/url_mh.[ch]: new files
	url support for MH mailboxes

2000-01-17  Sean 'Shaleh' Perry

	* examples/from.c: remove extraneous copyright notice

1999-12-15  Alain Magloire

	* url/url_mbox.h url/url_pop.h url/url_imap.h url/url_mailto.h
	New files.

1999-12-01  Alain Magloire

	* url/_cpystr.c url/chewurl.c url/url.c url/url_imap.c
	url/url_mailto.c url/url_mbox.c url/url_pop.c : New files,
	first attempt to define the URL API.

	* lib/Makefile.am: added xmalloc.c, xstrdup.c, xstrtol.{c,h}
	* lib/xmalloc.c lib/xstrdup.c lib/xstrtol.c lib/xstrtol.h : New files

1999-11-21  Jeff Bailey

	* doc/rfc*: Add.  Standards followed should be included here.

1999-11-23  Jakob 'sparky' Kaivo

	* TODO: Mention Maildir
	* libmailbox/mailbox.c (mbox_init): new function
	* libmailbox/maildir.h: new file
	* libmailbox/maildir.c: new file
	* libmailbox/mailbox.c (mbox_open): uncommented maildir_open attempt

1999-11-15  Jeff Bailey

	* lib/ansi2knr.c lib/ansi2knr.h: Add

	* configure.in: Add AM_C_PROTOTYPES

	* libmailbox/Makefile.am: Add ansi2knr handling

1999-11-08  Sean 'Shaleh' Perry

	* cleaned up some of the automake autoconf magic for non-Linux

1999-11-07  Sean 'Shaleh' Perry

	* TODO: restructuring, now split into sections
	* libmailbox/mailbox.c libmailbox/mailbox.h: added two new functions
	to the api and began implementing them in unixmbox
		is_updated() => has this mailbox been updated externally?
		scan() => build info on mailbox, removing old data as needed
		currently not implemented

1999-11-06  Sean 'Shaleh' Perry

	* libmailbox/mailbox.c: more work on expunge
	* libmailbox/mailbox.c: added a tester routine
	* Makefile.am: added -g

1999-11-06  Sean 'Shaleh' Perry

	* libmailbox/unixmbox.c: work on expunge
	use read/write along with lseek still blows up -- getting there
	* mail/mail.c: check return value of mbox_open()

1999-10-23  Alain Magloire

	* ChangeLog: Cleanup according to GNU std, and remove
	of email addresses. The emails should be AUTHORS or THANKS
	so if they change no need to sed everything.

1999-10-11  Jeff Bailey

	* libmailbox/Makefile.am: Remove no-install option, add -pedantic

1999-10-12  Sean 'Shaleh' Perry

	* made sure that the imap4 was REALLY broken

1999-10-11  Jeff Bailey

	* imap4d/Makefile.am: New file

	* configure.in: Create imap4d/Makefile, and no install option
	for library

	* pop3d/Makefile.am: Add warnings, remove unneeded variable

        * TODO: Update

	* impa4rev1/: Rename to imap4d. (I asked first, really I did...)

	* lib/Makefile.am: Update for new files

	* lib/getline.c: New File

	* lib/getline.h: New file

1999-10-11  Sean 'Shaleh' Perry

	* added my imap code -- PLEASE DO NOT TOUCH

1999-10-10  Jeff Bailey

	* THANKS: New file

	* doc/mailutils.texi: New File
	Provided by Alain Magloire <alainm@rcsm.ece.mcgill.ca> with some
	changes so that Makeinfo reports no errors.

	* doc/Makefile.am: New file

	* configure.in: Deal with libsrc to lib rename

	* pop3d/Makefile.am: Deal with libsrc to lib rename

	* Makefile.am: Deal with libsrc to lib rename.
	Add reference to doc/ subdirectory.

	* libsrc/: Rename to lib/

1999-10-09  Sean 'Shaleh' Perry

	* Made changelog.pl output in approved format -- I miss the time stamp

1999-10-09 Sean 'Shaleh' Perry

	* added examples/gnu-pop3d.pam

1999-10-08  Jeff Bailey

	* doc/: New directory

	* pop3d/Makefile.am: Remove pam detection, now handled by configure
	in the @AUTHLIBS@ spot.

	* configure.in: Detect pam correctly/handle crypt case correctly
	Add option: --disable-pam

	* acconfig.h: New File

1999-10-08 Sean 'Shaleh' Perry

	* added showmail.c to examples
	* libmailbox: some minor code cleanups

1999-10-08 Sean 'Shaleh' Perry

	* fixed the "if empty mailbox, return not implemented"
	NB: seems there was a large assumption being made:
	if unixmbox_open() failed, it was because it was not mbox
	this was wrong for many reasons, so on actual "not mbox",
	return EBADMSG.
	Prolly want to come up with a better error, but this works for now
	* more cleaning in the mailbox code
	a) added stat() call -- we can bomb earlier, plus detect if
	passed object is a directory or file
	b) unixmbox_close() free()'s mbox.  This will hamper the use
	when we add support for more mailboxes later.  Need to find
	a solution.  Perhaps a unixmbox_free() call.
	There was also a small leak there -- mbox->name was being left.
	c) To aid checking in unixbox_open(), added checks around fgets call.
	Now properly detects EOF, errors, etc.  This was a large cause of the
	spurious "not implemented" bug.
	d) all of unixmbox_open()'s function calls should now be checked
	NB: need to do the same for rest of file

1999-10-07 Sean 'Shaleh' Perry

	* removed spurious code in from.c
	* added TODO file

1999-10-07  Jeff Bailey

	* Makefile.am: Compile libsrc/ first.

	* pop3d/Makefile.am: Link properly with crypt and libmailutils.a
	from libsrc/

	* libsrc/Makefile.am: Produce one library for all functions.
	Do not use libtool for this library, it will never be shared.

	* configure.in: Remove AM_MAINTAINER_MODE.  Export crypt detection
	to Makefiles

1999-10-07 Sean 'Shaleh' Perry

	* included my read_a_line() in examples/

1999-10-06 Sean 'Shaleh' Perry

	* Cleanup some compilation issues
	* changed "w+" to "w" in called to pop3_mainloop():ofile = fdopen()
	why was it called with w+?  It is only ever used for writing.
	* catch EINTR in call to accept() (play nice w/ our UNIX friends)
	* set SO_REUSEADDR on daemon's socket

1999-10-05 Sean 'Shaleh' Perry

	* Added changelog.pl so we can have automated entries
	set CVS_EMAIL=me@here.com and CVS_FULLNAME="Joe Blow"
	usage: changelog.pl "added signal.c" or changelog.pl, an editor will
	then appear (uses $VISUAL and $EDITOR)
	the format is controlled simply via the format call at the end
	and the section of perl code directly above it

1999-10-05 Sean 'Shaleh' Perry

	* added pop3d/signal.c -- contains pop3_sigchld() currently

1999-10-05 Sean 'Shaleh' Perry

	* initial fork() rewrite, not even compiled it yet

1999-10-04 Sean 'Shaleh' Perry

	* changed lock(int mode) to lock(mailbox_lock_t mode), this will allow
	the type to be chnaged later without affecting code compatibility
	* added name to AUTHORS
	* noticed mention of IMAP4 server and went back to coding it (-:

1999-10-03  Jeff Bailey

	* mail/mail.c: Support --help, --version.

	* mail/Makefile.am: Add -Wall to compile line.

	* libmailbox/Makefile.am: Add -Wall to compile line.

	* libmailbox/mailbox.c: Warning cleanup, second parameter of lock
	should be unsigned int, not int.

	* libmailbox/mailbox.h: ""

	* libmailbox/unixmbox.h: ""

	* libmailbox/unixmbox.c: ""

	* AUTHORS: Include my name. =)

	* README: Rewrite for public consumption

	* README-alpha: New file, add mailing list address, CVS information.

	* libmailbox/unixmbox.c: Include config.h if defined

	* libmailbox/mailbox.c: Include config.h if defined

	* mail/mail.c: Include config.h if defined, update copyright.


1999-10-01 Sean 'Shaleh' Perry

	* added an examples directory and the first example, from.c

1999-10-01 Jakob 'sparky' Kaivo

	* libmailbox/*.[ch]: added cleanup patches from Shaleh while he works
	on getting CVS access

1999-09-22  Jakob 'sparky' Kaivo

	* mail/mail.c (main): added 'f' and 'F' to test mbox_header_line

	* pop3d/apop.c (pop3_apop): cleanup, partial rewrite for libmailbox

	* pop3d/retr.c (pop3_retr): fixed a potential segfault

	* pop3d/user.c (pop3_user): cleanup and use mbox_lock

	* libmailbox/mailbox.c (mbox_header_line): new function
	(mbox_body_lines): new function

	* mail/Makefile.am (mail_DEPENDENCIES): added libmailbox.la

	* pop3d/top.c (pop3_top): made it work with libmailbox

	* libmailbox/unixmbox.c (unixmbox_open): added check to see if it's
	actually an mbox file
	(unixmbox_open): Set mbox->_lock to unixmbox_lock
	(unixmbox_lock): new function

	* libmailbox/unixmbox.h: Added prototype for locking

	* libmailbox/mailbox.c: Add dummy initializer for locking

	* libmailbox/mailbox.h: Added interface for locking
	Added interfaces for mbox_header_line and mbox_body_lines

	* pop3d/*.[ch]: changed copyright info to FSF

	* libmailbox/*.[ch]: added copyright/licensing info

1999-09-21  Jakob 'sparky' Kaivo

	* pop3d/Makefile.am (pop3d_LDADD): add $(AUTHLIBS)

	* configure.in: Added libsrc/Makefile to AC_OUTPUT (duh, Jake!)
	fixed the PAM and crypt checks

	* README: actually put something here, noted necessary tools to build
	from CVS

1999-09-14  Jakob 'sparky' Kaivo

	* pop3d/pop3d.c (main): moved setgid() call to after option parsing
	(main): make --version report PACKAGE and VERSION

	* libmailbox/mailbox.c (mbox_open): changed paramater type to const

	* pop3d/Makefile.am (INCLUDES): change relative directories to
	top_srcdir base

	* configure.in: Added checks for PAM and crypt

1999-09-13  Jakob 'sparky' Kaivo

	* pop3d/retr.c (pop3_retr): fixed calls mbox_header => mbox_get_header
	and mbox_body => mbox_get_body

	* pop3d/user.c (pop3_user): removed references to mailbox variable

	* pop3d/stat.c (pop3_stat): fixed mbox->is_deleted => mbox_is_deleted

	* pop3d/pop3d.c (pop3_mainloop): removed reference to lockfile variable

	* pop3d/extra.c (pop3_abquit): change fclose(mbox) to mbox_close(mbox)
	removed calls to free(messages) and pop3_unlock()

	* pop3d/dele.c (pop3_dele): fixed call to mbox_delete()

	* Makefile.am (SUBDIRS): added pop3d and libsrc

	* configure.in: Added checks needed for pop3d/*
	made it work with libtool

	* libsrc/*: imported from gnu-pop3d tree

	* pop3d/*: imported from gnu-pop3d tree

1999-09-11  Jeff Bailey

	* libmailbox/unixmbox.h: Do not prefix config.h defines with _

1999-09-10  Jeff Bailey

	* */*: Accomidate directory rearrange
