2004-09-18  Sergey Poznyakoff 

	* configure.ac: Bugfix
	* mailbox/mime.c (_mime_munge_content_header): Bugfix

2004-08-31  Wojciech Polak

	* mailbox/file_stream.c (prog_stream_create): Changed type
	of the second argument to const char*.
	(filter_prog_stream_create): Likewise.
	(_prog_stream_create): Changed type of the third argument
	to const char*.
	* include/mailutils/stream.h (prog_stream_create): Changed
	type of the second argument to const char*.
	(filter_prog_stream_create): Likewise.
	* doc/texinfo/stream.texi: Updated.

	* configure.ac (AM_GNU_GETTEXT_VERSION): Bump to 0.14.1.

2004-08-24  Sergey Poznyakoff

	* mail/util.c (util_do_command): Fixed coredump on unparseable
	input strings.
	* THANKS: Added Dan Jacobson

2004-08-20  Sergey Poznyakoff 

	* include/mailutils/guile.h (MU_SCM_SYMBOL_VALUE): New define
	(_mu_scm_mailer,_mu_scm_debug): Removed externs.
	* include/mailutils/list.h (list_set_destroy_item): Use __PMT in
	nested declarations.
	* libmu_scm/mu_message.c: Properly access mu-mailer and mu-message
	values.

2004-08-11  Sergey Poznyakoff

	* mail/send.c (mail_send0): Fixed coredump on reading a
	single escape char.

2004-08-08  Sergey Poznyakoff

	* headers/argp.h: Protect typedef int error_t by an additional
	#ifndef. Thanks Alex S. Moore <asmoore@edge.net> for helping
	find out the problem.

2004-08-07  Sergey Poznyakoff  

	* Makefile.am: Raised automake requirements to version
	1.8.5
	* examples/nntpclient.c: Minor fixes.
	* imap4d/Makefile.am (INCLUDES): Added -Imailbox
	* imap4d/imap4d.h: Added missing includes
	* include/mailutils/nls.h [!ENABLE_NLS]: Define gettext()
	* include/mailutils/nntp.h: Minor changes. The screen is 80x24!
	* mailbox/locker.c (_locker_lock_dotlock): Make sure the lock file
	is writable for the owner.
	* mailbox/imap/folder.c (authenticate_imap_sasl_anon): Use
	auth_state instead of state. Possibly this was a typo...
	* mailbox/include/imap0.h (struct _f_imap.capac): Changed
	type to int.
	* mailbox/maildir/mbox.c (maildir_gethostname): Fixed a gross
	memory allocation bug.

	* mailbox/message.c: Minor changes.
	* mailbox/mbox/url.c: Likewise.
	* mailbox/nntp/folder.c: Likewise.
	* mailbox/nntp/mbox.c: Likewise.
	* mailbox/nntp/nntp_article.c: Likewise.
	* mailbox/nntp/nntp_connect.c: Likewise.
	* mailbox/nntp/nntp_date.c: Likewise.
	* mailbox/nntp/nntp_head.c: Likewise.
	* mailbox/nntp/nntp_ihave.c: Likewise.
	* mailbox/nntp/nntp_post.c: Likewise.

	* scripts/guile-1.6/guile-doc-snarf: Bugfix. Always use $AWK.

2004-08-06  Sergey Poznyakoff

	* include/mailutils/daemon.h: Include types.h

2004-07-07  Sergey Poznyakoff

	* libsieve/extensions/spamd.c (decode_float): Return
	signed long value, as SpamAssassin scores can be negative.
	(spamd_test): Updated accordingly

2004-07-05  Sergey Poznyakoff

	* include/mailutils/registrar.h (mu_register_extra_formats): New
	macro.
	(mu_register_all_formats): Call mu_register_extra_formats()
	* mailbox/mu_argp.c (mu_conf_option): Added ENABLE_NNTP
	* mailbox/nntp/Makefile.am: Add nntp0.h
	* mh/Makefile.am: Added libmu_nntp.la
	* readmsg/readmsg.c (main): Call mu_register_extra_formats()

2004-07-05  Sergey Poznyakoff 

	* include/mailutils/registrar.h (mu_register_all_mbox_formats):
	Removed nntp_record. It is not a *mailbox* format.
	* mailbox/mailutils-config.c: Added mu_nntp
	
	* mailbox/include/iterator0.h (_iterator.getitem): Changed
	declaration. There's no use passing a pointer to the const
	location, since the function *must* assign to it anyway.
	* include/mailutils/iterator.h (iterator_set_getitem): Changed
	declaration
	* mailbox/iterator.c (iterator_set_getitem): Changed
	declaration
	(iterator_current): Additional typecast on pitem
	
	* mailbox/list.c: Updated declaration of getitem method.
	* mailbox/nntp/nntp_iterator.c: Likewise
	* mailbox/pop/pop3_iterator.c: Likewise
	
	* mailbox/mailbox.c: Include <list.h>
	* mailbox/mailer.c: Likewise

2004-07-05  Alain Magloire

	* configure.ac: enable NNTP support.

	* example/Makefile.am: Enable NNTP.
	* frm/Makefile.am: Enable NNTP.
	* from/Makefile.am: Enable NNTP.
	* messages/Makefile.am: Enable NNTP.
	* readmsg/Makefile.am: Enable NNTP.
	* guimb/Makefile.am: Enable NNTP.
	* mail/Makefile.am: Enable NNTP.
	* sieve/Makefile.am: Enable NNTP.

	* imap4d/Makefile.am: Put @AUTHLIBS@ before libmailbox.a (failed
	on cygwin if not).
	* pop3d/Makefile.am: Put @AUTHLIBS@ before libmailbox.a (failed on
	cygwin if not).
	* mail.local/Makefile.am: Put @AUTHLIBS@ before libmailbox.a
	(failed on cygwin if not).

	* mailbox/stream.c (stream_wait): Bugfix.  If we buffer return
	true if the cache still	have data.

	* include/mailutils/nntp.h: Define the default NNTP port number.
	* include/mailutils/pop3.h: Define the default POP3 port number.
	* include/mailutils/registrar.h: Enable NNTP.

	* mailbox/nntp/folder.c: New file.
	* mailbox/nntp/mbox.c: New file.
	* mailbox/nntp/url.c: New file.
	* mailbox/nntp/Makefile.am: Updated.

2004-07-03  Sergey Poznyakoff

	* mailbox/list.c (list_data_dup): Bugfix: *ptr was not assigned.
	* doc/texinfo/muint.texi: Automake does	not allow two independent
	texi sources to include the same file (version.texi, in this
	case). What a stupid lossage! However it handles all files whose
	name matches "vers*.texi" as version.texi, which allows to
	override the bug: include vers-muint.texi instead of version.texi.

2004-07-01  Sergey Poznyakoff

	* include/mailutils/iterator.h (iterator_current)
	(iterator_set_getitem): Changed proto
	(iterator_get_list): Removed.
	* mailbox/include/iterator0.h (struct _iterator.getitem): Changed
	declaration.
	* mailbox/iterator.c (iterator_current)
	(iterator_set_getitem): Changed declaration
	* mailbox/list.c (getitem): Changed declaration

	* mailbox/rfc2047.c (rfc2047_decode): Fixed buffer
	handling

	* examples/mta.c: Minor fix
	* examples/nntpclient.c: Fixed printf formats
	(com_newgroups,com_newnews): Variable declarations are only allowed
	before the statements.

	* mailbox/nntp/nntp_article.c: Fixed printf formats
	* mailbox/nntp/nntp_body.c: Likewise
	* mailbox/nntp/nntp_head.c: Likewise

	* mailbox/nntp/nntp_iterator.c: Added missing include
	(nntp_itr_getitem): Changed declaration

	* mailbox/pop/pop3_iterator.c (pop3_itr_getitem): Changed
	declaration

2004-06-30  Alain Magloire

	* configure.ac: Add nntp directory.
	* doc/rfc/pop3.texit: add new API.

	* mailbox/Makefile.am: Add nntp directory.

	* mailbox/nntp/Makefile.am: Add new files.
	* mailbox/nntp/nntp_iterator.c: New file.
	* mailbox/nntp/nntp_list_active.c: Use the an iterator_t instead of a lis_t..
	* mailbox/nntp/nntp_list_distribpats.c: instead of a lis_t. file.
	* mailbox/nntp/nntp_list_times.c: instead of a lis_t. file.
	* mailbox/nntp/nntp_list_newgroups.c: instead of a lis_t. file.
	* mailbox/nntp/nntp_list_newnews.c: instead of a lis_t. file.

	* mailbox/pop3/Makefile.am: Add new files.
	* mailbox/pop3/pop3_iterator.c: New file.
	* mailbox/pop3/pop3_capa.c: instead of a lis_t. file.
	* mailbox/pop3/pop3_lista.c: instead of a lis_t. file.
	* mailbox/pop3/pop3_uidla.c: instead of a lis_t. file.

	* include/mailutils/Makefile.am: Add nntp.h and pop3.h.
	* include/mailutils/nntp.h: Add new declarations.
	* include/mailutils/sys/Makefile.am: Add nntp and pop3.hh
	* include/mailutils/sys/nntp.h: Add new declarations.
	* include/mailutils/pop3.h: NAdd new declarations.

	* example/Makefile.am: Adusted to new API.
	* example/nntpclient.c: Adusted to new API.
	* example/pop3client.c: Adusted to new API.
	* example/.cvsignore: Add nntpclient.

2004-06-30  Alain Magloire

	* mailbox/list.c (list_get_iterator): Bug fix, wrong size for calloc()
	(list_data_dup): Copy the elements.

2004-06-30  Sergey Poznyakoff

	* libsieve/extensions/spamd.c (spamd_shutdown): Bugfix

2004-06-29  Alain Magloire

	Continuing the framework for NNTP support

	* mailbox/nntp/.cvsignore: New file.
	* mailbox/nntp/nntp_help.c: New file.
	* mailbox/nntp/nntp_ihave.c: New file.
	* mailbox/nntp/nntp_list_active.c: New file.
	* mailbox/nntp/nntp_list_distribpats.c: New file.
	* mailbox/nntp/nntp_list_distributions.c: New file.
	* mailbox/nntp/nntp_list_newsgroups.c: New file.
	* mailbox/nntp/nntp_list_times.c: New file.
	* mailbox/nntp/nntp_newgroups.c: New file.
	* mailbox/nntp/nntp_newnews.c: New file.
	* mailbox/nntp/nntp_post.c: New file.

	* mailbox/nntp/nntp_article.c: implementation.
	* mailbox/nntp/nntp_body.c: implementation.
	* mailbox/nntp/nntp_connect.c: implementation.
	* mailbox/nntp/nntp_date.c: implementation.
	* mailbox/nntp/nntp_destroy.c: implementation.
	* mailbox/nntp/nntp_group.c: implementation.
	* mailbox/nntp/nntp_head.c: implementation.
	* mailbox/nntp/nntp_list_extensions.c: implementation.
	* mailbox/nntp/nntp_stat.c: implementation.
	* mailbox/nntp/nntp_stream.c: implementation.

	* include/mailutils/nntp.h: Declarations.
	* include/mailutils/sys/nntp.h: Declarations.

	* examples/nntpclient.c: Adujsted.
	* examples/pop3client.c: Minor bug fixes.

2004-06-28  Sergey Poznyakoff

	* mailbox/filter_iconv.c (internal_icvt_read)
	(copy_pass): Fixed mistyped conditions.

	* mailbox/include/iterator0.h (struct _iterator): rewritten as
	a general-purpose iterator structure.
	* include/mailutils/iterator.h (iterator_create): Changed
	proto.
	(iterator_attach,iterator_detach,iterator_advance)
	(iterator_set_first,iterator_set_next)
	(iterator_set_getitem,iterator_set_finished_p)
	(iterator_set_dup,iterator_set_destroy): New functions.
	* mailbox/iterator.c: Likewise
	* include/mailutils/list.h (list_get_iterator): New function
	* mailbox/list.c: Likewise

	* examples/listop.c: Replace iterator_create with
	list_get_iterator.
	* examples/nntpclient.c: Likewise
	* examples/pop3client.c: Likewise
	* imap4d/util.c: Likewise
	* libsieve/comparator.c: Likewise
	* libsieve/prog.c: Likewise
	* libsieve/register.c: Likewise
	* libsieve/require.c: Likewise
	* libsieve/sieve.l: Likewise
	* mail/retain.c: Likewise
	* mail/util.c: Likewise
	* mailbox/filter.c: Likewise
	* mailbox/folder.c: Likewise
	* mailbox/mailbox.c: Likewise
	* mailbox/mailer.c: Likewise
	* mailbox/mu_auth.c: Likewise
	* mailbox/mutil.c: Likewise
	* mailbox/observer.c: Likewise
	* mh/ali.c: Likewise
	* mh/mh_alias.y: Likewise
	* mh/pick.y: Likewise
	* mh/refile.c: Likewise

2004-06-27  Sergey Poznyakoff

	* direntry: New file

2004-06-27  Sergey Poznyakoff

	See ChangeLog.0.5 for earlier entries


Local Variables:
mode: change-log
version-control: never
End:
