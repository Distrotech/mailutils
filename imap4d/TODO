- finish command retrieval restructuring
- see how many globals I can kill
- make it compile
- make it work
- use libmailbox and friends
- testing
- testing
- testing
- optimize
